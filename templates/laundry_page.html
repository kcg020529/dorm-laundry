{% extends 'base.html' %}

{% block content %}
<div class="overlay">
    <h1 class="reserve-text">세탁기 현황</h1>
    <div class="machine-grid">
        {% for machine in machines %}
        <div class="machine-card {% if machine.is_in_use %}machine-in-use{% else %}machine-available{% endif %}" id="machine-card-{{ machine.id }}">
            <h2 class="text-xl font-bold">{{ machine.name }}</h2>
            <p class="machine-status {% if machine.is_in_use %}in-use{% else %}available{% endif %}"
               id="machine-{{ machine.id }}">
               {% if machine.is_in_use %}❌ 사용 중{% else %}✅ 사용 가능{% endif %}
            </p>
            <p class="machine-time" id="machine-time-{{ machine.id }}">
                {% if machine.last_end_time %}
                    최근 종료: {{ machine.last_end_time|date:"H:i" }}
                {% else %}
                    정보 없음
                {% endif %}
            </p>

            <button class="machine-btn reserve-button"
                    id="reserve-btn-{{ machine.id }}"
                    data-machine-id="{{ machine.id }}"
                    data-start-time="{{ proposed_start_time|date:"c" }}"
                    data-end-time="{{ proposed_end_time|date:"c" }}"
                    {% if machine.is_in_use %}disabled{% endif %}>
                {% if machine.is_in_use %}예약 불가{% else %}지금 예약{% endif %}
            </button>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
